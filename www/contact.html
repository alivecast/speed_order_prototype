<!DOCTYPE html>
<html>
	<head>
		<title></title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
		<meta charset="utf-8">

		<!-- iPad/iPhone specific css below, add after your main css >
		<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />
		<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />
		-->

		<link rel="stylesheet" href="js/jquery.mobile-1.2.0.min.css" type="text/css" />
		<link rel="stylesheet" href="css/iphone.css" type="text/css" />
		<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>

		<script type="text/javascript" charset="utf-8" src="js/base64.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/aes.js"></script>

		<script type="text/javascript" charset="utf-8" src="js/cordova-1.5.0.js"></script>
		
		<link rel="stylesheet" href="css/iphone.css" type="text/css" />

		<script type="text/javascript">
		
			function onBodyLoad() {

				document.addEventListener("deviceready", onDeviceReady, false);
			}

			function onDeviceReady() {

				function onClickButton(){
					// Alert -----------------------------------------------------------------------
					// navigator.notification.alert("contact_order.html");
					
					var get = getQuery();
					// 内容の取得
					var body = document.getElementById('contact_text').value;
					// 送信者情報：customer_id
					var customer_id = get.customer_id;
					// 販売者・商品 情報：qr_id, item_version
					var qr_id = get.qr_id;
					var item_version = get.item_version;
					var order_id = get.order_id;
					// 送信処理
					var url = 'https://gs850.ggsv.jp/~w850033/class/json/receive_contact.php';
					var params = {contact: 
						{
							body: body,
							customer_id: customer_id,
							qr_id: qr_id,
							item_version: item_version,
							order_id: order_id
						}
					}
					$.post(
						url, // アクセスするURL
						params, // 送信データ
						function(data, status, XHR) {// 処理結果
							if (status == 'success') {
								var message = 'お問い合わせ内容を送信しました';
								var title = '送信完了';
								var button = 'OK';
								navigator.notification.alert(message, alertCallBack(), title, button);
							} else {
								var message = 'お問い合わせ内容の送信ができませんでした';
								var title = '送信失敗';
								var button = 'OK';
								navigator.notification.alert(message, alertCallBack(), title, button);
							}
						}
					);
				}
			}
			
			// alertCallBack -----------------------------------------------------------------------
			function alertCallBack() {
				window.location.href = 'show_order_index.html';
			}

		</script>
		
		<script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.2.0.min.js"></script>
		
	</head>

	<body onload="onBodyLoad()">

		<div data-role="page" data-add-back-btn="false">

			<div data-role="header" data-position="inline">
				<h1>お問い合わせ</h1>
			</div>

			<div class="cont_contact" data-role="content">

				<div class="contact_detail">
					<div class="txt">
						商品や送料など、販売者へのお問い合わせはこちらから行えます。
					</div>
				</div>

				<form method="POST" action="" onsubmit="return false;">
					<div data-role="fieldcontain" >

						<ul class="contact_list" data-role="listview">
							<li>
								<label for="#" class="fieldLabel">お問い合わせ内容</label>
								<br />
								<textarea id="contact_text" cols="20" rows="5" name="contact"></textarea>
							</li>
						</ul>

						<div class="check_btn">
							<input class="btn_next" type="button" value="送信する" onclick="onClickButton();" />
						</div>

					</div>
				</form>

			</div>

			<div class="footer" data-role="footer" data-position="fixed" data-id="tabber">
				<ul>
					<li class="tab01" current>
						<a href="show_order.html" data-ajax="false"> <span>注文履歴</span> </a>
					</li>
					<li class="tab02">
						<a href="barcode.html" data-ajax="false"> <span>読み取り</span> </a>
					</li>
					<li class="tab03">
						<a href="setting.html" data-ajax="false"> <span>設定</span> </a>
					</li>
				</ul>
			</div><!-- /dr-footer -->

		</div>

	</body>
</html>

